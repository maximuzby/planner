(window.webpackJsonpplanner=window.webpackJsonpplanner||[]).push([[0],{36:function(e,a,t){e.exports=t(62)},49:function(e,a,t){},50:function(e,a,t){},51:function(e,a,t){},61:function(e,a,t){},62:function(e,a,t){"use strict";t.r(a);t(37);var n=t(0),r=t.n(n),c=t(17),l=t.n(c),o=t(66),s=t(64),i=t(65),u=t(15),d=t(9),m=t(67),p=t(16),f=t(33),y=t(34),x=t(30),b=t.n(x),v=t(6),E=t(20),k=t.n(E),g=function(e){return e.isoWeekday()<=6},h=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-xxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var t=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===a?t:3&t|8).toString(16)})},N=v.types.model("Entity",{id:v.types.optional(v.types.identifier,h)}),O=N.named("Day").props({date:v.types.string,title:v.types.string}).views(function(e){return{get isWeekend(){return g(k()(e.date))}}}).actions(function(e){return{setTitle:function(a){return e.title=a}}}),j=N.named("Person").props({name:v.types.string}).actions(function(e){return{setName:function(a){return e.name=a}}}),w=N.named("Task").props({name:v.types.string,day:v.types.reference(O),person:v.types.reference(j)}).actions(function(e){return{setName:function(a){return e.name=a},moveTo:function(a,t){e.day=a,e.person=t}}}),P=v.types.model("PlannerApp",{people:v.types.array(j),days:v.types.array(O),tasks:v.types.array(w)}).views(function(e){return{getTasks:function(a,t){return e.tasks.filter(function(e){return e.day===a&&e.person===t})}}}).actions(function(e){return{addDay:function(){var a=k()(e.days[e.days.length-1].date).add(1,"day");e.days.push({title:a.format("ddd, MMM D"),date:a.format()})},addPerson:function(){e.people.push({name:""})},afterCreate:function(){for(var a=0;a<7;a++){var t=k()().startOf("date").add(a,"day");e.days.push({title:t.format("ddd, MMM D"),date:t.format()})}e.people=Object(v.cast)([{name:"Vasya"},{name:"Petya"}]),e.tasks=Object(v.cast)([{name:"Task 1",day:e.days[0].id,person:e.people[0].id},{name:"Task 2",day:e.days[0].id,person:e.people[0].id},{name:"Task 3",day:e.days[1].id,person:e.people[1].id}])}}}),T=r.a.createContext(null);function _(){var e=P.create({});return b()(e),e}var C=function(e){var a=e.children,t=Object(d.a)(_);return r.a.createElement(T.Provider,{value:t},a)},D=function(){var e=r.a.useContext(T);if(!e)throw new Error("You have forgot to use StoreProvider, shame on you.");return e},M=(t(49),function(e){var a=e.setValue,t=e.value,c=e.classNamePrefix,l=e.onBlur,o=Object(n.useCallback)(function(e){a(e.target.value)},[a]);return Object(d.b)(function(){return r.a.createElement("input",{autoFocus:!0,onBlur:l,className:"".concat(c,"-cell-editor"),value:t,type:"text",onChange:o})})}),B=function(e){var a=Object(n.useState)(!1),t=Object(u.a)(a,2),c=t[0],l=t[1],o=Object(n.useCallback)(function(){l(!0)},[]),s=Object(n.useCallback)(function(){l(!1)},[]);return Object(d.b)(function(){return r.a.createElement("th",{className:"planner-cell planner-cell_header ".concat(e.classNamePrefix,"-cell"),onClick:o},c?r.a.createElement(M,Object.assign({},e,{onBlur:s})):r.a.createElement("div",{className:"".concat(e.classNamePrefix,"-cell-text")},e.value))})},A=function(e){return Object(d.b)(function(){return r.a.createElement(B,{value:e.day.title,setValue:e.day.setTitle,classNamePrefix:"day"})})},V=(t(50),function(e){var a=e.person;return Object(d.b)(function(){return r.a.createElement(B,{value:a.name,setValue:a.setName,classNamePrefix:"person"})})}),W=(t(51),function(e){var a=e.task,t=Object(p.c)({item:{task:a,type:"card"},collect:function(e){return{isDragging:!!e.isDragging()}}}),n=Object(u.a)(t,2),c=n[0].isDragging,l=n[1];return Object(d.b)(function(){return r.a.createElement("div",{ref:l,style:{opacity:c?.5:1},className:"planner-card card-task"},a.name)})}),F=function(e){var a=Object(p.d)({accept:"card",drop:function(a){a.task.moveTo(e.day,e.person),console.log(a)}}),t=Object(u.a)(a,2)[1],n=D();return Object(d.b)(function(){var a=n.getTasks(e.day,e.person);return r.a.createElement("td",{ref:t,className:"planner-cell planner-cell_task"},0===a.length&&r.a.createElement("div",{className:"planner-card card-free"},"Free"),a.map(function(e){return r.a.createElement(W,{task:e,key:e.id})}))})},S=function(){var e=D();return Object(d.b)(function(){return r.a.createElement(p.b,{backend:f.a},r.a.createElement(p.b,{backend:y.a},r.a.createElement("table",{className:"planner-table"},r.a.createElement("tbody",null,r.a.createElement("tr",{className:"planner-table__header"},r.a.createElement("th",{className:"planner-cell planner-cell_header"}),e.days.map(function(e){return r.a.createElement(A,{key:e.id,day:e})}),r.a.createElement("th",{className:"planner-cell planner-cell_add"},r.a.createElement(m.a,{variant:"primary",onClick:e.addDay,title:"Add Day"},"Add"))),e.people.map(function(a){return r.a.createElement("tr",{className:"planner-table__row",key:a.id},r.a.createElement(V,{person:a}),e.days.map(function(e){return r.a.createElement(F,{key:e.id,day:e,person:a})}))}),r.a.createElement("tr",{className:"planner-table__row"},r.a.createElement("td",{className:"planner-cell planner-cell_add"},r.a.createElement(m.a,{variant:"primary",onClick:e.addPerson,title:"Add Person"},"Add")))))))})},J=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(o.a,{fixed:"top",bg:"dark",variant:"dark",expand:"lg"},r.a.createElement(o.a.Brand,{href:"#home"},"Planner")),r.a.createElement(s.a,{fluid:!0},r.a.createElement(i.a,null,e.children)))};t(61),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(function(){return r.a.createElement(C,null,r.a.createElement(J,null,r.a.createElement(S,null)))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[36,1,2]]]);
//# sourceMappingURL=main.b9779680.chunk.js.map