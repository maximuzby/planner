(window.webpackJsonpplanner=window.webpackJsonpplanner||[]).push([[0],{35:function(e,t,n){e.exports=n(61)},48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){"use strict";n.r(t);n(36);var a=n(0),r=n.n(a),c=n(16),l=n.n(c),s=n(66),o=n(64),i=n(65),u=n(15),d=n(9),m=n(63),p=n(67),f=n(20),y=n(33),x=n(30),h=n.n(x),v=n(6),b=n(19),g=n.n(b),E=function(e){return e.isoWeekday()<=6},k=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-xxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)})},D=v.types.model("Entity",{id:v.types.optional(v.types.identifier,k)}),w=D.named("Day").props({date:v.types.string,title:v.types.string}).views(function(e){return{get isWeekend(){return E(g()(e.date))}}}).actions(function(e){return{setTitle:function(t){return e.title=t}}}),N=D.named("Person").props({name:v.types.string}).actions(function(e){return{setName:function(t){return e.name=t}}}),O=D.named("Task").props({name:v.types.string,startDay:v.types.number,person:v.types.reference(N),length:v.types.optional(v.types.number,1)}).views(function(e){return{get finishDay(){return e.startDay+e.length-1}}}).views(function(e){return{starts:function(t){return e.startDay===t},finishes:function(t){return e.finishDay===t}}}).actions(function(e){return{setName:function(t){return e.name=t},moveTo:function(t,n,a){e.startDay=e.startDay+(n-t),e.person=a},increaseLength:function(){return e.length++},decreaseLength:function(){return e.length=Math.max(e.length-1,1)}}}),j=v.types.model("PlannerApp",{people:v.types.array(N),days:v.types.array(w),tasks:v.types.array(O)}).views(function(e){return{getTasks:function(t,n){return e.tasks.filter(function(e){return e.person===n&&t>=e.startDay&&t<e.startDay+e.length})}}}).actions(function(e){return{addDay:function(){var t=g()(e.days[e.days.length-1].date).add(1,"day");e.days.push({title:t.format("ddd, MMM D"),date:t.format()})},addPerson:function(){e.people.push({name:""})},afterCreate:function(){for(var t=0;t<7;t++){var n=g()().startOf("date").add(t,"day");e.days.push({title:n.format("ddd, MMM D"),date:n.format()})}e.people=Object(v.cast)([{name:"John"},{name:"Max"}]),e.tasks=Object(v.cast)([{name:"Task 1",startDay:0,person:e.people[0].id},{name:"Task 2",startDay:1,person:e.people[0].id},{name:"Task 3",startDay:1,person:e.people[1].id}])}}}),P=r.a.createContext(null);function C(){var e=j.create({});return h()(e),e}var T=function(e){var t=e.children,n=Object(d.a)(C);return r.a.createElement(P.Provider,{value:n},t)},_=function(){var e=r.a.useContext(P);if(!e)throw new Error("You have forgot to use StoreProvider, shame on you.");return e},I=(n(48),function(e){var t=e.setValue,n=e.value,c=e.classNamePrefix,l=e.onBlur,s=Object(a.useCallback)(function(e){t(e.target.value)},[t]);return Object(d.b)(function(){return r.a.createElement("input",{autoFocus:!0,onBlur:l,className:"".concat(c,"-cell-editor"),value:n,type:"text",onChange:s})})}),M=function(e){var t=Object(a.useState)(!1),n=Object(u.a)(t,2),c=n[0],l=n[1],s=Object(a.useCallback)(function(){l(!0)},[]),o=Object(a.useCallback)(function(){l(!1)},[]);return Object(d.b)(function(){return r.a.createElement("th",{className:"planner-cell planner-cell_header ".concat(e.classNamePrefix,"-cell"),onClick:s},c?r.a.createElement(I,Object.assign({},e,{onBlur:o})):r.a.createElement("div",{className:"".concat(e.classNamePrefix,"-cell-text")},e.value))})},B=function(e){return Object(d.b)(function(){return r.a.createElement(M,{value:e.day.title,setValue:e.day.setTitle,classNamePrefix:"day"})})},A=(n(49),function(e){var t=e.person;return Object(d.b)(function(){return r.a.createElement(M,{value:t.name,setValue:t.setName,classNamePrefix:"person"})})}),L=(n(50),function(e){var t=e.task,n=e.dayIndex,a=Object(f.c)({item:{task:t,type:"card",fromIndex:e.dayIndex},collect:function(e){return{isDragging:!!e.isDragging()}}}),c=Object(u.a)(a,2),l=c[0].isDragging,s=c[1];return Object(d.b)(function(){return r.a.createElement("div",{ref:s,style:{opacity:l?.5:1},className:"planner-card card-task ".concat(t.starts(n)&&"task-start"," ").concat(t.finishes(n)&&"task-finish")},t.name," ",r.a.createElement(m.a,null,r.a.createElement(p.a,{size:"sm",variant:"primary",onClick:t.increaseLength},"+"),r.a.createElement(p.a,{size:"sm",variant:"primary",onClick:t.decreaseLength},"-")))})}),W=function(e){var t=Object(f.d)({accept:"card",drop:function(t){return t.task.moveTo(t.fromIndex,e.dayIndex,e.person),{}}}),n=Object(u.a)(t,2)[1],a=_();return Object(d.b)(function(){var t=a.getTasks(e.dayIndex,e.person);return r.a.createElement("td",{ref:n,className:"planner-cell planner-cell_task"},0===t.length&&r.a.createElement("div",{className:"planner-card card-free"},"Free"),t.map(function(t){return r.a.createElement(L,{dayIndex:e.dayIndex,task:t,key:t.id})}))})},F=function(){var e=_();return r.a.createElement(f.b,{backend:y.a},Object(d.b)(function(){return r.a.createElement("table",{className:"planner-table"},r.a.createElement("tbody",null,r.a.createElement("tr",{className:"planner-table__header"},r.a.createElement("th",{className:"planner-cell planner-cell_header"}),e.days.map(function(e){return r.a.createElement(B,{key:e.id,day:e})}),r.a.createElement("th",{className:"planner-cell planner-cell_add"},r.a.createElement(p.a,{variant:"primary",onClick:e.addDay,title:"Add Day"},"Add"))),e.people.map(function(t){return r.a.createElement("tr",{className:"planner-table__row",key:t.id},r.a.createElement(A,{person:t}),e.days.map(function(e,n){return r.a.createElement(W,{key:n,dayIndex:n,person:t})}))}),r.a.createElement("tr",{className:"planner-table__row"},r.a.createElement("td",{className:"planner-cell planner-cell_add"},r.a.createElement(p.a,{variant:"primary",onClick:e.addPerson,title:"Add Person"},"Add")))))}))},J=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,{fixed:"top",bg:"dark",variant:"dark",expand:"lg"},r.a.createElement(s.a.Brand,{href:"#home"},"Planner")),r.a.createElement(o.a,{fluid:!0},r.a.createElement(i.a,null,e.children)))};n(60),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(function(){return r.a.createElement(T,null,r.a.createElement(J,null,r.a.createElement(F,null)))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[35,1,2]]]);
//# sourceMappingURL=main.fb02d75b.chunk.js.map